============================= test session starts ==============================
platform linux -- Python 3.13.2, pytest-8.3.5, pluggy-1.5.0 -- /home/hgavert/.cache/pypoetry/virtualenvs/analytics-dIuC8OJs-py3.13/bin/python
cachedir: .pytest_cache
rootdir: /home/hgavert/2025-FI-ARK-644-Arkistokanta/analytics
configfile: pytest.ini
plugins: anyio-4.8.0
collecting ... collected 8 items / 5 deselected / 3 selected

tests/test_analysis.py::test_get_mentioned_people 
-------------------------------- live log call ---------------------------------
DEBUG    openai._base_client:_base_client.py:453 Request options: {'method': 'post', 'url': '/deployments/ark-gpt-4o/chat/completions', 'headers': {'api-key': '<redacted>'}, 'files': None, 'json_data': {'messages': [{'role': 'user', 'content': 'Artikkeli: "{\'title\': \'”Sä et kuule häviä mitään siinä, että menet, mutta siinä sä häviät, jos et uskalla mennä”, sanoi Kuopion viulukilpailun voittaja osallistumistaan empineelle Jasmin Mönkköselle\', \'body\': \'Nyt vähän huilia, sitten katson Tour de Skitä. Hiihto on parasta vastapainoa soittamiselle, Jasmin Mönkkönen nauraa. –\\u2009Ja sen jälkeen alan palautella mieleeni välierän ohjelmaa. Kouvolalaislähtöisellä Mönkkösellä, 25, oli kunnia nousta perjantaina ensimmäisenä soittajana lavalle Kuopion viulukilpailussa. Alun perin Mönkköstä ennen oli arvottu yksi soittaja, mutta tämä oli peruuttanut osallistumisensa. –\\u2009Ajattelin, että ei siinä, ollaan sitten ensimmäinen soittaja. Oli oikeastaan ihan mukavakin aloittaa. Tunnelma oli rauhallinen ja sain keskittyä omaan juttuuni. Omaa kilpailusuoritustaan Mönkkönen ei halua vielä liian tarkasti analysoida, mutta hän sanoo olevansa tyytyväinen esitykseensä. Alkuerässä Mönkkönen soitti J.S. Bachin sooloviulusonaatin g-mollista osat Adagio ja Fuuga, Ludwig van Beethovenin Romanssi F-duurissa sekä Niccolo Paganinin Kapriisi nro 24:n. –\\u2009En ole kuullut opettajaltani vielä arviota, mutta itselleni jäi olo, että soitin ilolla, ja se oli minulle tärkeää. Pystyin tuomaan esille hetkiä, jotka ainakin itseäni koskettavat tuossa musiikissa. Ainahan kaikki voisi mennä pikkaisen paremmin, mutta kilpailu on tiukka paikka. Kokonaisuus onnistui. Lavalla nouseminen jännitti, mutta enemmän Mönkköstä jännitti edellisenä päivänä. –\\u2009Silloin on se hetki, kun pitää tehdä päätöksiä, että miten vielä soittaa, miten lepää ja miten syö. Tänään ennen kilpailua riitti, että heräsi ja lämmitteli. Mönkkönen osallistui Kuopion viulukilpailuun myös viisi vuotta sitten. Tuolloin kilpailu päättyi alkueriin, ja kokonaisuudesta jäi paha maku suuhun. Hän myöntää miettineensä, ettei tulisi Kuopioon uudestaan. –\\u2009Kesällä olin kuitenkin samalla festivaalilla (Kuopion viulukilpailun vuoden 2005 voittajan) Petteri Iivosen kanssa, ja kerroin hänelle, etten ehkä osallistu uudestaan. Petteri sanoi, että ”sä et kuule häviä mitään siinä, että menet, mutta siinä sä häviät, jos et uskalla mennä”. –\\u2009Se lause tuli oikeaan paikkaan. Halusin olla rohkea. Siitä alkoi valmistautuminen. Kilpailuohjelmiston työstämistä helpotti se, että Mönkkönen teki syksyn aikana Sibelius-Akatemiaan maisterin tutkintoonsa kuuluvat tutkintokonsertit, joissa oli pitkälti samoja kappaleita kuin kilpailussa. Mönkkönen huomauttaa, että kilpaileminen on erityisen haastavaa tilanteessa, jossa tuntee suurimman osan kilpailijoista ja yleisössäkin on paljon tuttuja vuosien varrelta. Epämukavuusalueelle meneminen kuitenkin myös sytyttää ja pakottaa kehittymään. –\\u2009Olen yrittänyt hahmotella itselleni, miksi haluan kilpailla. Se syy on aito halu kehittyä soittajana, ja toisaalta halu olla rohkea. Viulunsoiton Mönkkönen aloitti neljävuotiaan, kun oli pyytänyt vanhemmiltaan joululahjaksi ”pieniä laatikoita ja viulun”. Siitä lähtien viulu on kulkenut matkassa. –\\u2009Viulu on tuntunut alusta saakka omalta jutulta, mutta on ollut myös kausia, kun pohdin, onko tämä se asia, jonka eteen haluan tehdä töitä. Viulutunnit Mönkkönen aloitti Pohjois-Kymen musiikkiopistossa Elvi Hautamäen opetuksessa. Ajatus ammattilaisuudesta heräsi, kun hän alkoi reissata kaksi kertaa viikossa Kouvolasta Lahteen Pertti Sutisen oppiin. Tuolloin Mönkkönen oli 11-vuotias. –\\u2009Homma muuttui ammattimaisemmaksi, ja soittoon alettiin rakentaa tekniikkapohjaa huolella. Se oli hidasta ja ärsyttävää työtä, mutta Pertti oli mahtava opettaja ja sytytti varmuuden siitä, että tätä haluan tehdä. Mönkkönen myöntää, että treenaamiselle jäi hyvin aikaa, koska hän kävi siskonsa kanssa kotikoulua – tosin ei siksi, että ehtisi soittaa. –\\u2009Eivät vanhempani ajatelleet, että käyttäisin ylimääräisen ajan viulutreeneihin. Vanhempani ovat opettajia, ja he olivat jo pitkään miettineet, että haluavat meidät kotikouluun. Siihen aikaan kotikoulu oli Suomessa vähän tabukin, mutta se toimi meille hirmuisen hyvin, Mönkkönen sanoo. –\\u2009Teini-iässä käytin viuluun enemmän aikaa kuin koulutehtäviin. Mutta koska kouluhommat sai tehtyä tehokkaasti, aikaa jäi koulun ja viulun lisäksi hyvin myös muille harrastuksille ja kavereille. Viulisteilla usein udellaan harjoittelumääristä, ja Mönkkönenkin on monta kertaa saanut kertoa, miten paljon hän harjoittelee. Vastaus on sikäli yllättävä, että hänen harjoittelumääränsä ovat nykyään samat kuin teininä. –\\u2009En ole ikinä ollut sellainen, että harjoittelisin viulun kanssa kahdeksan tuntia päivässä. Sen sijaan pyrin soittamaan kahdesta neljään tuntia siten, että kaikki, mitä teen, on tehokasta. Se riittää. Sen lisäksi pohdiskelen paljon musiikkia ja esimerkiksi sitä, mitä olen soittanut ja miten haluaisin soittaa. Teen puolivahingossakin mielikuvaharjoituksia. –\\u2009Toki on kausia, kun treenimäärä kasvaa. Esimerkiksi jos olen orkesterissa sijaisena, tulee soitettua enemmän. Kuopion viulukilpailua varten Mönkkönen oli erityisen tarkka siitä, että hän pystyi harjoittelemaan joka päivä laadukkaasti. Kun hän vietti joulua nykyään Nummelassa asuvien vanhempiensa luona, harjoittelupaikaksi löytyi Vihdin kirkko. –\\u2009Minulla oli toive, että pääsisin treenaamaan hyvään tilaan, ja rakastan harjoitella Vihdin kirkossa. Minulla oli kahvia termarissa ja sain vain oleskella siellä musiikin kanssa. Viulukilpailun välieriin valitut ilmoitetaan sunnuntaina illalla. Mönkkönen myöntää, että seuraavat pari päivää menevät epävarmuudessa. –\\u2009Toisaalta tällä alalla joutuu sietämään epävarmuutta muutenkin niin paljon, että koetan ottaa näistä päivistä ilon irti. Ohjelmiston lämmittelyn lisäksi koetan ulkoilla ja pelailla kollegojen kanssa vaikka lautapelejä, että tulee muutakin ajateltavaa. Muiden esityksiä Mönkkönen ei aio kuunnella. –\\u2009Haluan aidosti keskittyä omaan tekemiseeni. Mutta ei se katastrofi ole, jos vähän vahingossa kuulee muitakin. Joskus on ihanaa ja inspiroivaakin kuulla vaikka jonkun kaunis vibrato ja ajatella, että minäkin haluan soittaa noin. Silloin se palvelee kehittymistä. Jos ajattelee, että apua, toi soittaa paremmin kuin minä, niin siinä saa itsensä vain sekaisin. Mitä finaalipaikka merkitsisi Mönkköselle? –\\u2009Sitä on hirmuisen vaikea sanoa. Toki sellainen mielikuva on, että finaaliin pääsy olisi hyvä ponnistus ammattielämään, ja menestys painaisi myös esimerkiksi apurahahakemuksissa. Mutta jos ajattelen itseäni, niin eniten finaaliin pääsemisessä minua innostaisi se, että pääsisin soittamaan Kuopion kaupunginorkesterin kanssa Sibeliuksen viulukonserton. Kuopion viulukilpailun alkuerät käydään 3.–5.1. Välierät ovat 7.–8.1. ja finaalit 9.–10.1. Iikka Taavitsainen Kuopion viulukilpailun ensimmäinen alkuerä keräsi paikalle kymmenittäin kiinnostuneita kuulijoita. Kuopiolainen Sanna Hannonen kertoo tulleensa seuraamaan kilpailu nyt ensimmäistä kertaa. –\\u2009Viulumusiikki on mitä ihaninta musiikkia. Sitä kuunnellessa nauttii ja lepää. Itse en harrasta soittamista, mutta nautin siitä, kun joku soittaa hyvin viulua. Aikaisemmin Hannonen on käynyt kuuntelemassa Kuopiossa pianokilpailua. Ajatus lähteä viulukilpailuun syntyi yhdessä työkaverin kanssa. –\\u2009Ja tämä alkuerän aikataulu osui hyvin omaan aikatauluun. Tavoite on, että näkisin muitakin eriä. Helsinkiläinen Niko Nokelainen tuli paikalle, koska hänen tyttärensä Elisa Nokelainen soittaa kilpailussa. Isä ja tytär ovat nyt ensimmäistä kertaa Kuopiossa. –\\u2009Aikaisemmin olemme käyneet muun muassa Jyväskylän viulukilpailussa, Nokelainen kertoo. –\\u2009Minua jännittää kauheasti, mutta lapsi on aivan rentona, hän nauraa.\', \'lead\': \'\'}".n\n Vaihe 1: Analysoi annettu artikkeli ja siinä mainitut henkilöt. Ota huomioon sekä suomenkieliset että englanninkieliset nimikäytänteet.\n Vaihe 2: Listaa jokainen henkilö joka on mainittu artikkelissa koko nimellä, niin että hänestä on annettu etunimi ja sukunimi. Jos henkilölle ei ole annettu sukunimeä artikkelissa, älä listaa häntä. Listaa nämä kaikki, riippumatta siitä, onko henkilö elossa vai kuollut. Listaa henkilö myös jos vain hänen työnsä mainitaan, esimerkiksi \'Leonardo Da Vincin maalaus ...\'. Älä listaa henkilöä, jos hänen nimeään ei ole mainittu. Älä listaa eläimiä tai muita nimettyjä kohteita.\n Kirjoita jokainen nimi täsmälleen siinä muodossa kuin se esiintyy artikkelissa, kaikki pienaakkosilla. Älä tee oletuksia henkilön nimestä. Esimerkiksi, jos henkilöllä A ei ole mainittua sukunimeä, mutta hänen puolisollaan on, älä oleta, että henkilöllä A on sama sukunimi.\n Vaihe 3: Käy lista läpi ja varmista että kukin henkilö on mainittu vain kerran listassa. Jos sama henkilö on listassa useamman kerran käytä tästä henkilöstä hänen pidempää nimeä, esimerkiksi \'annamari kaisla korhonen\' mieluummin kuin \'mari korhonen\', ja poista kaikki muut maininnat tästä henkilöstä.\n Vaihe 4: Käy listä läpi vielä kerran ja poista jokaisen henkilön nimi, jolla ei ole sukunimeä mainittu artikkelissa. Jos henkilölle on mainittu vain etunimi, poista hänet listasta.\n Anna vain lista henkilöistä. Anna lista JSON lista muodossa.'}], 'model': 'ark-gpt-4o', 'seed': 1, 'store': True, 'temperature': 0}}
DEBUG    openai._base_client:_base_client.py:993 Sending HTTP Request: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='swedencentral.api.cognitive.microsoft.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fd24efc70e0>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x7fd24ef559a0> server_hostname='swedencentral.api.cognitive.microsoft.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fd24eddc690>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Length', b'1251'), (b'Content-Type', b'application/json'), (b'apim-request-id', b'28e3c68e-41c7-4dbd-9770-3958cd477660'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'x-content-type-options', b'nosniff'), (b'x-accel-buffering', b'no'), (b'x-ms-rai-invoked', b'true'), (b'x-request-id', b'f6f61c55-619e-4396-a078-4a5af3a35ebe'), (b'x-ms-region', b'Sweden Central'), (b'x-ratelimit-remaining-requests', b'149'), (b'x-ratelimit-limit-requests', b'150'), (b'x-ratelimit-remaining-tokens', b'147098'), (b'x-ratelimit-limit-tokens', b'150000'), (b'azureml-model-session', b'd453-20250219010046'), (b'x-envoy-upstream-service-time', b'1509'), (b'x-ms-client-request-id', b'28e3c68e-41c7-4dbd-9770-3958cd477660'), (b'Date', b'Wed, 05 Mar 2025 15:06:38 GMT')])
INFO     httpx:_client.py:1025 HTTP Request: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1032 HTTP Response: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview "200 OK" Headers({'content-length': '1251', 'content-type': 'application/json', 'apim-request-id': '28e3c68e-41c7-4dbd-9770-3958cd477660', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'x-accel-buffering': 'no', 'x-ms-rai-invoked': 'true', 'x-request-id': 'f6f61c55-619e-4396-a078-4a5af3a35ebe', 'x-ms-region': 'Sweden Central', 'x-ratelimit-remaining-requests': '149', 'x-ratelimit-limit-requests': '150', 'x-ratelimit-remaining-tokens': '147098', 'x-ratelimit-limit-tokens': '150000', 'azureml-model-session': 'd453-20250219010046', 'x-envoy-upstream-service-time': '1509', 'x-ms-client-request-id': '28e3c68e-41c7-4dbd-9770-3958cd477660', 'date': 'Wed, 05 Mar 2025 15:06:38 GMT'})
DEBUG    openai._base_client:_base_client.py:1040 request_id: f6f61c55-619e-4396-a078-4a5af3a35ebe
FAILED
tests/test_analysis.py::test_get_article_location 
-------------------------------- live log call ---------------------------------
DEBUG    openai._base_client:_base_client.py:453 Request options: {'method': 'post', 'url': '/deployments/ark-gpt-4o/chat/completions', 'headers': {'api-key': '<redacted>'}, 'files': None, 'json_data': {'messages': [{'role': 'user', 'content': 'Artikkeli: "{\'title\': \'”Sä et kuule häviä mitään siinä, että menet, mutta siinä sä häviät, jos et uskalla mennä”, sanoi Kuopion viulukilpailun voittaja osallistumistaan empineelle Jasmin Mönkköselle\', \'body\': \'Nyt vähän huilia, sitten katson Tour de Skitä. Hiihto on parasta vastapainoa soittamiselle, Jasmin Mönkkönen nauraa. –\\u2009Ja sen jälkeen alan palautella mieleeni välierän ohjelmaa. Kouvolalaislähtöisellä Mönkkösellä, 25, oli kunnia nousta perjantaina ensimmäisenä soittajana lavalle Kuopion viulukilpailussa. Alun perin Mönkköstä ennen oli arvottu yksi soittaja, mutta tämä oli peruuttanut osallistumisensa. –\\u2009Ajattelin, että ei siinä, ollaan sitten ensimmäinen soittaja. Oli oikeastaan ihan mukavakin aloittaa. Tunnelma oli rauhallinen ja sain keskittyä omaan juttuuni. Omaa kilpailusuoritustaan Mönkkönen ei halua vielä liian tarkasti analysoida, mutta hän sanoo olevansa tyytyväinen esitykseensä. Alkuerässä Mönkkönen soitti J.S. Bachin sooloviulusonaatin g-mollista osat Adagio ja Fuuga, Ludwig van Beethovenin Romanssi F-duurissa sekä Niccolo Paganinin Kapriisi nro 24:n. –\\u2009En ole kuullut opettajaltani vielä arviota, mutta itselleni jäi olo, että soitin ilolla, ja se oli minulle tärkeää. Pystyin tuomaan esille hetkiä, jotka ainakin itseäni koskettavat tuossa musiikissa. Ainahan kaikki voisi mennä pikkaisen paremmin, mutta kilpailu on tiukka paikka. Kokonaisuus onnistui. Lavalla nouseminen jännitti, mutta enemmän Mönkköstä jännitti edellisenä päivänä. –\\u2009Silloin on se hetki, kun pitää tehdä päätöksiä, että miten vielä soittaa, miten lepää ja miten syö. Tänään ennen kilpailua riitti, että heräsi ja lämmitteli. Mönkkönen osallistui Kuopion viulukilpailuun myös viisi vuotta sitten. Tuolloin kilpailu päättyi alkueriin, ja kokonaisuudesta jäi paha maku suuhun. Hän myöntää miettineensä, ettei tulisi Kuopioon uudestaan. –\\u2009Kesällä olin kuitenkin samalla festivaalilla (Kuopion viulukilpailun vuoden 2005 voittajan) Petteri Iivosen kanssa, ja kerroin hänelle, etten ehkä osallistu uudestaan. Petteri sanoi, että ”sä et kuule häviä mitään siinä, että menet, mutta siinä sä häviät, jos et uskalla mennä”. –\\u2009Se lause tuli oikeaan paikkaan. Halusin olla rohkea. Siitä alkoi valmistautuminen. Kilpailuohjelmiston työstämistä helpotti se, että Mönkkönen teki syksyn aikana Sibelius-Akatemiaan maisterin tutkintoonsa kuuluvat tutkintokonsertit, joissa oli pitkälti samoja kappaleita kuin kilpailussa. Mönkkönen huomauttaa, että kilpaileminen on erityisen haastavaa tilanteessa, jossa tuntee suurimman osan kilpailijoista ja yleisössäkin on paljon tuttuja vuosien varrelta. Epämukavuusalueelle meneminen kuitenkin myös sytyttää ja pakottaa kehittymään. –\\u2009Olen yrittänyt hahmotella itselleni, miksi haluan kilpailla. Se syy on aito halu kehittyä soittajana, ja toisaalta halu olla rohkea. Viulunsoiton Mönkkönen aloitti neljävuotiaan, kun oli pyytänyt vanhemmiltaan joululahjaksi ”pieniä laatikoita ja viulun”. Siitä lähtien viulu on kulkenut matkassa. –\\u2009Viulu on tuntunut alusta saakka omalta jutulta, mutta on ollut myös kausia, kun pohdin, onko tämä se asia, jonka eteen haluan tehdä töitä. Viulutunnit Mönkkönen aloitti Pohjois-Kymen musiikkiopistossa Elvi Hautamäen opetuksessa. Ajatus ammattilaisuudesta heräsi, kun hän alkoi reissata kaksi kertaa viikossa Kouvolasta Lahteen Pertti Sutisen oppiin. Tuolloin Mönkkönen oli 11-vuotias. –\\u2009Homma muuttui ammattimaisemmaksi, ja soittoon alettiin rakentaa tekniikkapohjaa huolella. Se oli hidasta ja ärsyttävää työtä, mutta Pertti oli mahtava opettaja ja sytytti varmuuden siitä, että tätä haluan tehdä. Mönkkönen myöntää, että treenaamiselle jäi hyvin aikaa, koska hän kävi siskonsa kanssa kotikoulua – tosin ei siksi, että ehtisi soittaa. –\\u2009Eivät vanhempani ajatelleet, että käyttäisin ylimääräisen ajan viulutreeneihin. Vanhempani ovat opettajia, ja he olivat jo pitkään miettineet, että haluavat meidät kotikouluun. Siihen aikaan kotikoulu oli Suomessa vähän tabukin, mutta se toimi meille hirmuisen hyvin, Mönkkönen sanoo. –\\u2009Teini-iässä käytin viuluun enemmän aikaa kuin koulutehtäviin. Mutta koska kouluhommat sai tehtyä tehokkaasti, aikaa jäi koulun ja viulun lisäksi hyvin myös muille harrastuksille ja kavereille. Viulisteilla usein udellaan harjoittelumääristä, ja Mönkkönenkin on monta kertaa saanut kertoa, miten paljon hän harjoittelee. Vastaus on sikäli yllättävä, että hänen harjoittelumääränsä ovat nykyään samat kuin teininä. –\\u2009En ole ikinä ollut sellainen, että harjoittelisin viulun kanssa kahdeksan tuntia päivässä. Sen sijaan pyrin soittamaan kahdesta neljään tuntia siten, että kaikki, mitä teen, on tehokasta. Se riittää. Sen lisäksi pohdiskelen paljon musiikkia ja esimerkiksi sitä, mitä olen soittanut ja miten haluaisin soittaa. Teen puolivahingossakin mielikuvaharjoituksia. –\\u2009Toki on kausia, kun treenimäärä kasvaa. Esimerkiksi jos olen orkesterissa sijaisena, tulee soitettua enemmän. Kuopion viulukilpailua varten Mönkkönen oli erityisen tarkka siitä, että hän pystyi harjoittelemaan joka päivä laadukkaasti. Kun hän vietti joulua nykyään Nummelassa asuvien vanhempiensa luona, harjoittelupaikaksi löytyi Vihdin kirkko. –\\u2009Minulla oli toive, että pääsisin treenaamaan hyvään tilaan, ja rakastan harjoitella Vihdin kirkossa. Minulla oli kahvia termarissa ja sain vain oleskella siellä musiikin kanssa. Viulukilpailun välieriin valitut ilmoitetaan sunnuntaina illalla. Mönkkönen myöntää, että seuraavat pari päivää menevät epävarmuudessa. –\\u2009Toisaalta tällä alalla joutuu sietämään epävarmuutta muutenkin niin paljon, että koetan ottaa näistä päivistä ilon irti. Ohjelmiston lämmittelyn lisäksi koetan ulkoilla ja pelailla kollegojen kanssa vaikka lautapelejä, että tulee muutakin ajateltavaa. Muiden esityksiä Mönkkönen ei aio kuunnella. –\\u2009Haluan aidosti keskittyä omaan tekemiseeni. Mutta ei se katastrofi ole, jos vähän vahingossa kuulee muitakin. Joskus on ihanaa ja inspiroivaakin kuulla vaikka jonkun kaunis vibrato ja ajatella, että minäkin haluan soittaa noin. Silloin se palvelee kehittymistä. Jos ajattelee, että apua, toi soittaa paremmin kuin minä, niin siinä saa itsensä vain sekaisin. Mitä finaalipaikka merkitsisi Mönkköselle? –\\u2009Sitä on hirmuisen vaikea sanoa. Toki sellainen mielikuva on, että finaaliin pääsy olisi hyvä ponnistus ammattielämään, ja menestys painaisi myös esimerkiksi apurahahakemuksissa. Mutta jos ajattelen itseäni, niin eniten finaaliin pääsemisessä minua innostaisi se, että pääsisin soittamaan Kuopion kaupunginorkesterin kanssa Sibeliuksen viulukonserton. Kuopion viulukilpailun alkuerät käydään 3.–5.1. Välierät ovat 7.–8.1. ja finaalit 9.–10.1. Iikka Taavitsainen Kuopion viulukilpailun ensimmäinen alkuerä keräsi paikalle kymmenittäin kiinnostuneita kuulijoita. Kuopiolainen Sanna Hannonen kertoo tulleensa seuraamaan kilpailu nyt ensimmäistä kertaa. –\\u2009Viulumusiikki on mitä ihaninta musiikkia. Sitä kuunnellessa nauttii ja lepää. Itse en harrasta soittamista, mutta nautin siitä, kun joku soittaa hyvin viulua. Aikaisemmin Hannonen on käynyt kuuntelemassa Kuopiossa pianokilpailua. Ajatus lähteä viulukilpailuun syntyi yhdessä työkaverin kanssa. –\\u2009Ja tämä alkuerän aikataulu osui hyvin omaan aikatauluun. Tavoite on, että näkisin muitakin eriä. Helsinkiläinen Niko Nokelainen tuli paikalle, koska hänen tyttärensä Elisa Nokelainen soittaa kilpailussa. Isä ja tytär ovat nyt ensimmäistä kertaa Kuopiossa. –\\u2009Aikaisemmin olemme käyneet muun muassa Jyväskylän viulukilpailussa, Nokelainen kertoo. –\\u2009Minua jännittää kauheasti, mutta lapsi on aivan rentona, hän nauraa.\', \'lead\': \'\'}".n\n Vaihe 1: Analysoi annettu artikkeli ja siinä mainitut paikat.\n Vaihe 2: Etsi artikkelin aiheen paikka. Tämän tulisi olla paikka joka on artikkelin aiheen kannalta kaikkein tärkein. Anna paikkasta sen maa, kaupunki, ja kaupunginosa tai alue, jossa paikka on. Jos paikasta ei voi tunnistaa kaupunginosaa tai kaupunkia, jätä nämä osiot tyhjäksi. Anna silti jokainen osio, jätä tyhjät osiot vain ilman sisältöä. Anna kaikki annetut osat pikkuakkosilla. Anna vastaus JSON muodossa, niin että että kentät ovat country, city, neighborhood. Älä anna mitään muuta kuin vastaus.'}], 'model': 'ark-gpt-4o', 'seed': 1, 'store': True, 'temperature': 0}}
DEBUG    openai._base_client:_base_client.py:993 Sending HTTP Request: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='swedencentral.api.cognitive.microsoft.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fd24ee4d6d0>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x7fd24ef55d90> server_hostname='swedencentral.api.cognitive.microsoft.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fd24ef763f0>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Length', b'1123'), (b'Content-Type', b'application/json'), (b'apim-request-id', b'14342f5d-e187-4858-bca3-29eb7285df55'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'x-content-type-options', b'nosniff'), (b'x-accel-buffering', b'no'), (b'x-ms-rai-invoked', b'true'), (b'x-request-id', b'dd1632a7-5bf2-40bb-9ef1-074e0f4d57a6'), (b'x-ms-region', b'Sweden Central'), (b'x-ratelimit-remaining-requests', b'148'), (b'x-ratelimit-limit-requests', b'150'), (b'x-ratelimit-remaining-tokens', b'144412'), (b'x-ratelimit-limit-tokens', b'150000'), (b'azureml-model-session', b'd440-20250218202345'), (b'x-envoy-upstream-service-time', b'781'), (b'x-ms-client-request-id', b'14342f5d-e187-4858-bca3-29eb7285df55'), (b'Date', b'Wed, 05 Mar 2025 15:06:40 GMT')])
INFO     httpx:_client.py:1025 HTTP Request: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1032 HTTP Response: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview "200 OK" Headers({'content-length': '1123', 'content-type': 'application/json', 'apim-request-id': '14342f5d-e187-4858-bca3-29eb7285df55', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'x-accel-buffering': 'no', 'x-ms-rai-invoked': 'true', 'x-request-id': 'dd1632a7-5bf2-40bb-9ef1-074e0f4d57a6', 'x-ms-region': 'Sweden Central', 'x-ratelimit-remaining-requests': '148', 'x-ratelimit-limit-requests': '150', 'x-ratelimit-remaining-tokens': '144412', 'x-ratelimit-limit-tokens': '150000', 'azureml-model-session': 'd440-20250218202345', 'x-envoy-upstream-service-time': '781', 'x-ms-client-request-id': '14342f5d-e187-4858-bca3-29eb7285df55', 'date': 'Wed, 05 Mar 2025 15:06:40 GMT'})
DEBUG    openai._base_client:_base_client.py:1040 request_id: dd1632a7-5bf2-40bb-9ef1-074e0f4d57a6
PASSED
tests/test_analysis.py::test_get_mentioned_organisations 
-------------------------------- live log call ---------------------------------
DEBUG    openai._base_client:_base_client.py:453 Request options: {'method': 'post', 'url': '/deployments/ark-gpt-4o/chat/completions', 'headers': {'api-key': '<redacted>'}, 'files': None, 'json_data': {'messages': [{'role': 'user', 'content': 'Artikkeli: "{\'title\': \'”Sä et kuule häviä mitään siinä, että menet, mutta siinä sä häviät, jos et uskalla mennä”, sanoi Kuopion viulukilpailun voittaja osallistumistaan empineelle Jasmin Mönkköselle\', \'body\': \'Nyt vähän huilia, sitten katson Tour de Skitä. Hiihto on parasta vastapainoa soittamiselle, Jasmin Mönkkönen nauraa. –\\u2009Ja sen jälkeen alan palautella mieleeni välierän ohjelmaa. Kouvolalaislähtöisellä Mönkkösellä, 25, oli kunnia nousta perjantaina ensimmäisenä soittajana lavalle Kuopion viulukilpailussa. Alun perin Mönkköstä ennen oli arvottu yksi soittaja, mutta tämä oli peruuttanut osallistumisensa. –\\u2009Ajattelin, että ei siinä, ollaan sitten ensimmäinen soittaja. Oli oikeastaan ihan mukavakin aloittaa. Tunnelma oli rauhallinen ja sain keskittyä omaan juttuuni. Omaa kilpailusuoritustaan Mönkkönen ei halua vielä liian tarkasti analysoida, mutta hän sanoo olevansa tyytyväinen esitykseensä. Alkuerässä Mönkkönen soitti J.S. Bachin sooloviulusonaatin g-mollista osat Adagio ja Fuuga, Ludwig van Beethovenin Romanssi F-duurissa sekä Niccolo Paganinin Kapriisi nro 24:n. –\\u2009En ole kuullut opettajaltani vielä arviota, mutta itselleni jäi olo, että soitin ilolla, ja se oli minulle tärkeää. Pystyin tuomaan esille hetkiä, jotka ainakin itseäni koskettavat tuossa musiikissa. Ainahan kaikki voisi mennä pikkaisen paremmin, mutta kilpailu on tiukka paikka. Kokonaisuus onnistui. Lavalla nouseminen jännitti, mutta enemmän Mönkköstä jännitti edellisenä päivänä. –\\u2009Silloin on se hetki, kun pitää tehdä päätöksiä, että miten vielä soittaa, miten lepää ja miten syö. Tänään ennen kilpailua riitti, että heräsi ja lämmitteli. Mönkkönen osallistui Kuopion viulukilpailuun myös viisi vuotta sitten. Tuolloin kilpailu päättyi alkueriin, ja kokonaisuudesta jäi paha maku suuhun. Hän myöntää miettineensä, ettei tulisi Kuopioon uudestaan. –\\u2009Kesällä olin kuitenkin samalla festivaalilla (Kuopion viulukilpailun vuoden 2005 voittajan) Petteri Iivosen kanssa, ja kerroin hänelle, etten ehkä osallistu uudestaan. Petteri sanoi, että ”sä et kuule häviä mitään siinä, että menet, mutta siinä sä häviät, jos et uskalla mennä”. –\\u2009Se lause tuli oikeaan paikkaan. Halusin olla rohkea. Siitä alkoi valmistautuminen. Kilpailuohjelmiston työstämistä helpotti se, että Mönkkönen teki syksyn aikana Sibelius-Akatemiaan maisterin tutkintoonsa kuuluvat tutkintokonsertit, joissa oli pitkälti samoja kappaleita kuin kilpailussa. Mönkkönen huomauttaa, että kilpaileminen on erityisen haastavaa tilanteessa, jossa tuntee suurimman osan kilpailijoista ja yleisössäkin on paljon tuttuja vuosien varrelta. Epämukavuusalueelle meneminen kuitenkin myös sytyttää ja pakottaa kehittymään. –\\u2009Olen yrittänyt hahmotella itselleni, miksi haluan kilpailla. Se syy on aito halu kehittyä soittajana, ja toisaalta halu olla rohkea. Viulunsoiton Mönkkönen aloitti neljävuotiaan, kun oli pyytänyt vanhemmiltaan joululahjaksi ”pieniä laatikoita ja viulun”. Siitä lähtien viulu on kulkenut matkassa. –\\u2009Viulu on tuntunut alusta saakka omalta jutulta, mutta on ollut myös kausia, kun pohdin, onko tämä se asia, jonka eteen haluan tehdä töitä. Viulutunnit Mönkkönen aloitti Pohjois-Kymen musiikkiopistossa Elvi Hautamäen opetuksessa. Ajatus ammattilaisuudesta heräsi, kun hän alkoi reissata kaksi kertaa viikossa Kouvolasta Lahteen Pertti Sutisen oppiin. Tuolloin Mönkkönen oli 11-vuotias. –\\u2009Homma muuttui ammattimaisemmaksi, ja soittoon alettiin rakentaa tekniikkapohjaa huolella. Se oli hidasta ja ärsyttävää työtä, mutta Pertti oli mahtava opettaja ja sytytti varmuuden siitä, että tätä haluan tehdä. Mönkkönen myöntää, että treenaamiselle jäi hyvin aikaa, koska hän kävi siskonsa kanssa kotikoulua – tosin ei siksi, että ehtisi soittaa. –\\u2009Eivät vanhempani ajatelleet, että käyttäisin ylimääräisen ajan viulutreeneihin. Vanhempani ovat opettajia, ja he olivat jo pitkään miettineet, että haluavat meidät kotikouluun. Siihen aikaan kotikoulu oli Suomessa vähän tabukin, mutta se toimi meille hirmuisen hyvin, Mönkkönen sanoo. –\\u2009Teini-iässä käytin viuluun enemmän aikaa kuin koulutehtäviin. Mutta koska kouluhommat sai tehtyä tehokkaasti, aikaa jäi koulun ja viulun lisäksi hyvin myös muille harrastuksille ja kavereille. Viulisteilla usein udellaan harjoittelumääristä, ja Mönkkönenkin on monta kertaa saanut kertoa, miten paljon hän harjoittelee. Vastaus on sikäli yllättävä, että hänen harjoittelumääränsä ovat nykyään samat kuin teininä. –\\u2009En ole ikinä ollut sellainen, että harjoittelisin viulun kanssa kahdeksan tuntia päivässä. Sen sijaan pyrin soittamaan kahdesta neljään tuntia siten, että kaikki, mitä teen, on tehokasta. Se riittää. Sen lisäksi pohdiskelen paljon musiikkia ja esimerkiksi sitä, mitä olen soittanut ja miten haluaisin soittaa. Teen puolivahingossakin mielikuvaharjoituksia. –\\u2009Toki on kausia, kun treenimäärä kasvaa. Esimerkiksi jos olen orkesterissa sijaisena, tulee soitettua enemmän. Kuopion viulukilpailua varten Mönkkönen oli erityisen tarkka siitä, että hän pystyi harjoittelemaan joka päivä laadukkaasti. Kun hän vietti joulua nykyään Nummelassa asuvien vanhempiensa luona, harjoittelupaikaksi löytyi Vihdin kirkko. –\\u2009Minulla oli toive, että pääsisin treenaamaan hyvään tilaan, ja rakastan harjoitella Vihdin kirkossa. Minulla oli kahvia termarissa ja sain vain oleskella siellä musiikin kanssa. Viulukilpailun välieriin valitut ilmoitetaan sunnuntaina illalla. Mönkkönen myöntää, että seuraavat pari päivää menevät epävarmuudessa. –\\u2009Toisaalta tällä alalla joutuu sietämään epävarmuutta muutenkin niin paljon, että koetan ottaa näistä päivistä ilon irti. Ohjelmiston lämmittelyn lisäksi koetan ulkoilla ja pelailla kollegojen kanssa vaikka lautapelejä, että tulee muutakin ajateltavaa. Muiden esityksiä Mönkkönen ei aio kuunnella. –\\u2009Haluan aidosti keskittyä omaan tekemiseeni. Mutta ei se katastrofi ole, jos vähän vahingossa kuulee muitakin. Joskus on ihanaa ja inspiroivaakin kuulla vaikka jonkun kaunis vibrato ja ajatella, että minäkin haluan soittaa noin. Silloin se palvelee kehittymistä. Jos ajattelee, että apua, toi soittaa paremmin kuin minä, niin siinä saa itsensä vain sekaisin. Mitä finaalipaikka merkitsisi Mönkköselle? –\\u2009Sitä on hirmuisen vaikea sanoa. Toki sellainen mielikuva on, että finaaliin pääsy olisi hyvä ponnistus ammattielämään, ja menestys painaisi myös esimerkiksi apurahahakemuksissa. Mutta jos ajattelen itseäni, niin eniten finaaliin pääsemisessä minua innostaisi se, että pääsisin soittamaan Kuopion kaupunginorkesterin kanssa Sibeliuksen viulukonserton. Kuopion viulukilpailun alkuerät käydään 3.–5.1. Välierät ovat 7.–8.1. ja finaalit 9.–10.1. Iikka Taavitsainen Kuopion viulukilpailun ensimmäinen alkuerä keräsi paikalle kymmenittäin kiinnostuneita kuulijoita. Kuopiolainen Sanna Hannonen kertoo tulleensa seuraamaan kilpailu nyt ensimmäistä kertaa. –\\u2009Viulumusiikki on mitä ihaninta musiikkia. Sitä kuunnellessa nauttii ja lepää. Itse en harrasta soittamista, mutta nautin siitä, kun joku soittaa hyvin viulua. Aikaisemmin Hannonen on käynyt kuuntelemassa Kuopiossa pianokilpailua. Ajatus lähteä viulukilpailuun syntyi yhdessä työkaverin kanssa. –\\u2009Ja tämä alkuerän aikataulu osui hyvin omaan aikatauluun. Tavoite on, että näkisin muitakin eriä. Helsinkiläinen Niko Nokelainen tuli paikalle, koska hänen tyttärensä Elisa Nokelainen soittaa kilpailussa. Isä ja tytär ovat nyt ensimmäistä kertaa Kuopiossa. –\\u2009Aikaisemmin olemme käyneet muun muassa Jyväskylän viulukilpailussa, Nokelainen kertoo. –\\u2009Minua jännittää kauheasti, mutta lapsi on aivan rentona, hän nauraa.\', \'lead\': \'\'}".n\n Vaihe 1: Analysoi annettu artikkeli ja siinä mainitut organisaatiot. Vaihe 2: Listaa kaikkien organisaatioiden nimet riippumatta siitä, ovatko ne yrityksiä, voittoa tavoittelemattomia järjestöjä, oppilaitoksia, valtion organisaatioita, kansalaisjärjestöjä tai ammattiliittoja.\n Jokaisen organisaation nimen kohdalla käy läpi kaikki ehdot ja tarkista että täyttääkö se sen ehdon. Jos organisaaito täyttää ehdon, seuraa ehdossa nimettyjä toimia, muuten lisää se listaan.\n Ehto 1: Jos artikkelissa mainitaan lautakunta tai komissio, lisää se listaan, vaikka se olisi osa toista organisaatiota. Esimerkiksi \'Espoon kaupunki\' sisältää lautakunnan \'kulttuurilautakunta\', joka on osa pääorganisaatiota, mutta silti oma erillinen yksikkönsä.\n Ehto 2: Älä listaa epävirallisia ryhmiä organisaatioina. Jos ryhmä muodostuu yhteisten kiinnostusten pohjalta, se ei riitä organisaatioksi.\n Ehto 3: Jos organisaatiolle ei ole annettu omaa nimeä artikkelissa, vaan se on kuvailtu epäsuorasti esimerkiksi \'yksityinen päiväkoti\', älä listaa sitä. Listaa vain ja ainoastaa organisaatiot joilla on selkeä oma nimi kuten \'DAIN\'.\n Anna vain organisaatioiden nimet ja kirjoita ne kokonaan pienaakkosin. Älä anna mitään muuta. Jos artikkelista ei löydy organisaatioita, palauta tyhjä lista. Anna vastaus JSON lista muodossa.'}], 'model': 'ark-gpt-4o', 'seed': 1, 'store': True, 'temperature': 0}}
DEBUG    openai._base_client:_base_client.py:993 Sending HTTP Request: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='swedencentral.api.cognitive.microsoft.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fd24ef768b0>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x7fd24ef55e20> server_hostname='swedencentral.api.cognitive.microsoft.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fd24efb9010>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Length', b'1127'), (b'Content-Type', b'application/json'), (b'apim-request-id', b'c3517112-4d80-4c74-a7c6-a2d4c1322337'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'x-content-type-options', b'nosniff'), (b'x-accel-buffering', b'no'), (b'x-ms-rai-invoked', b'true'), (b'x-request-id', b'6caa69ee-33ab-43c4-82d3-3b9eaefa2e68'), (b'x-ms-region', b'Sweden Central'), (b'x-ratelimit-remaining-requests', b'147'), (b'x-ratelimit-limit-requests', b'150'), (b'x-ratelimit-remaining-tokens', b'141543'), (b'x-ratelimit-limit-tokens', b'150000'), (b'azureml-model-session', b'd440-20250218202345'), (b'x-envoy-upstream-service-time', b'1144'), (b'x-ms-client-request-id', b'c3517112-4d80-4c74-a7c6-a2d4c1322337'), (b'Date', b'Wed, 05 Mar 2025 15:06:41 GMT')])
INFO     httpx:_client.py:1025 HTTP Request: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1032 HTTP Response: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview "200 OK" Headers({'content-length': '1127', 'content-type': 'application/json', 'apim-request-id': 'c3517112-4d80-4c74-a7c6-a2d4c1322337', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'x-accel-buffering': 'no', 'x-ms-rai-invoked': 'true', 'x-request-id': '6caa69ee-33ab-43c4-82d3-3b9eaefa2e68', 'x-ms-region': 'Sweden Central', 'x-ratelimit-remaining-requests': '147', 'x-ratelimit-limit-requests': '150', 'x-ratelimit-remaining-tokens': '141543', 'x-ratelimit-limit-tokens': '150000', 'azureml-model-session': 'd440-20250218202345', 'x-envoy-upstream-service-time': '1144', 'x-ms-client-request-id': 'c3517112-4d80-4c74-a7c6-a2d4c1322337', 'date': 'Wed, 05 Mar 2025 15:06:41 GMT'})
DEBUG    openai._base_client:_base_client.py:1040 request_id: 6caa69ee-33ab-43c4-82d3-3b9eaefa2e68
PASSED

=================================== FAILURES ===================================
__________________________ test_get_mentioned_people ___________________________

    @pytest.mark.fast
    def test_get_mentioned_people():
        result = get_one_task(context(test_article), prompts["people"])
        list_result = sorted(json.loads(result))
        eval = evaluation_data["article 1"]["people"]
        scoring = 0
        for person in list_result:
            if person in eval:
                scoring += 1
>       assert scoring/len(eval) >= 0.9
E       AssertionError: assert (8 / 11) >= 0.9
E        +  where 11 = len(['elisa nokelainen', 'elvi hautam\xe4ki', 'iikka taavitsainen', 'j.s. bach', 'jasmin m\xf6nkk\xf6nen', 'ludwig van beethoven', 'niccolo paganini', 'niko nokelainen', 'pertti sutinen', 'petteri iivonen', 'sanna hannonen'])

tests/test_analysis.py:44: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    openai._base_client:_base_client.py:453 Request options: {'method': 'post', 'url': '/deployments/ark-gpt-4o/chat/completions', 'headers': {'api-key': '<redacted>'}, 'files': None, 'json_data': {'messages': [{'role': 'user', 'content': 'Artikkeli: "{\'title\': \'”Sä et kuule häviä mitään siinä, että menet, mutta siinä sä häviät, jos et uskalla mennä”, sanoi Kuopion viulukilpailun voittaja osallistumistaan empineelle Jasmin Mönkköselle\', \'body\': \'Nyt vähän huilia, sitten katson Tour de Skitä. Hiihto on parasta vastapainoa soittamiselle, Jasmin Mönkkönen nauraa. –\\u2009Ja sen jälkeen alan palautella mieleeni välierän ohjelmaa. Kouvolalaislähtöisellä Mönkkösellä, 25, oli kunnia nousta perjantaina ensimmäisenä soittajana lavalle Kuopion viulukilpailussa. Alun perin Mönkköstä ennen oli arvottu yksi soittaja, mutta tämä oli peruuttanut osallistumisensa. –\\u2009Ajattelin, että ei siinä, ollaan sitten ensimmäinen soittaja. Oli oikeastaan ihan mukavakin aloittaa. Tunnelma oli rauhallinen ja sain keskittyä omaan juttuuni. Omaa kilpailusuoritustaan Mönkkönen ei halua vielä liian tarkasti analysoida, mutta hän sanoo olevansa tyytyväinen esitykseensä. Alkuerässä Mönkkönen soitti J.S. Bachin sooloviulusonaatin g-mollista osat Adagio ja Fuuga, Ludwig van Beethovenin Romanssi F-duurissa sekä Niccolo Paganinin Kapriisi nro 24:n. –\\u2009En ole kuullut opettajaltani vielä arviota, mutta itselleni jäi olo, että soitin ilolla, ja se oli minulle tärkeää. Pystyin tuomaan esille hetkiä, jotka ainakin itseäni koskettavat tuossa musiikissa. Ainahan kaikki voisi mennä pikkaisen paremmin, mutta kilpailu on tiukka paikka. Kokonaisuus onnistui. Lavalla nouseminen jännitti, mutta enemmän Mönkköstä jännitti edellisenä päivänä. –\\u2009Silloin on se hetki, kun pitää tehdä päätöksiä, että miten vielä soittaa, miten lepää ja miten syö. Tänään ennen kilpailua riitti, että heräsi ja lämmitteli. Mönkkönen osallistui Kuopion viulukilpailuun myös viisi vuotta sitten. Tuolloin kilpailu päättyi alkueriin, ja kokonaisuudesta jäi paha maku suuhun. Hän myöntää miettineensä, ettei tulisi Kuopioon uudestaan. –\\u2009Kesällä olin kuitenkin samalla festivaalilla (Kuopion viulukilpailun vuoden 2005 voittajan) Petteri Iivosen kanssa, ja kerroin hänelle, etten ehkä osallistu uudestaan. Petteri sanoi, että ”sä et kuule häviä mitään siinä, että menet, mutta siinä sä häviät, jos et uskalla mennä”. –\\u2009Se lause tuli oikeaan paikkaan. Halusin olla rohkea. Siitä alkoi valmistautuminen. Kilpailuohjelmiston työstämistä helpotti se, että Mönkkönen teki syksyn aikana Sibelius-Akatemiaan maisterin tutkintoonsa kuuluvat tutkintokonsertit, joissa oli pitkälti samoja kappaleita kuin kilpailussa. Mönkkönen huomauttaa, että kilpaileminen on erityisen haastavaa tilanteessa, jossa tuntee suurimman osan kilpailijoista ja yleisössäkin on paljon tuttuja vuosien varrelta. Epämukavuusalueelle meneminen kuitenkin myös sytyttää ja pakottaa kehittymään. –\\u2009Olen yrittänyt hahmotella itselleni, miksi haluan kilpailla. Se syy on aito halu kehittyä soittajana, ja toisaalta halu olla rohkea. Viulunsoiton Mönkkönen aloitti neljävuotiaan, kun oli pyytänyt vanhemmiltaan joululahjaksi ”pieniä laatikoita ja viulun”. Siitä lähtien viulu on kulkenut matkassa. –\\u2009Viulu on tuntunut alusta saakka omalta jutulta, mutta on ollut myös kausia, kun pohdin, onko tämä se asia, jonka eteen haluan tehdä töitä. Viulutunnit Mönkkönen aloitti Pohjois-Kymen musiikkiopistossa Elvi Hautamäen opetuksessa. Ajatus ammattilaisuudesta heräsi, kun hän alkoi reissata kaksi kertaa viikossa Kouvolasta Lahteen Pertti Sutisen oppiin. Tuolloin Mönkkönen oli 11-vuotias. –\\u2009Homma muuttui ammattimaisemmaksi, ja soittoon alettiin rakentaa tekniikkapohjaa huolella. Se oli hidasta ja ärsyttävää työtä, mutta Pertti oli mahtava opettaja ja sytytti varmuuden siitä, että tätä haluan tehdä. Mönkkönen myöntää, että treenaamiselle jäi hyvin aikaa, koska hän kävi siskonsa kanssa kotikoulua – tosin ei siksi, että ehtisi soittaa. –\\u2009Eivät vanhempani ajatelleet, että käyttäisin ylimääräisen ajan viulutreeneihin. Vanhempani ovat opettajia, ja he olivat jo pitkään miettineet, että haluavat meidät kotikouluun. Siihen aikaan kotikoulu oli Suomessa vähän tabukin, mutta se toimi meille hirmuisen hyvin, Mönkkönen sanoo. –\\u2009Teini-iässä käytin viuluun enemmän aikaa kuin koulutehtäviin. Mutta koska kouluhommat sai tehtyä tehokkaasti, aikaa jäi koulun ja viulun lisäksi hyvin myös muille harrastuksille ja kavereille. Viulisteilla usein udellaan harjoittelumääristä, ja Mönkkönenkin on monta kertaa saanut kertoa, miten paljon hän harjoittelee. Vastaus on sikäli yllättävä, että hänen harjoittelumääränsä ovat nykyään samat kuin teininä. –\\u2009En ole ikinä ollut sellainen, että harjoittelisin viulun kanssa kahdeksan tuntia päivässä. Sen sijaan pyrin soittamaan kahdesta neljään tuntia siten, että kaikki, mitä teen, on tehokasta. Se riittää. Sen lisäksi pohdiskelen paljon musiikkia ja esimerkiksi sitä, mitä olen soittanut ja miten haluaisin soittaa. Teen puolivahingossakin mielikuvaharjoituksia. –\\u2009Toki on kausia, kun treenimäärä kasvaa. Esimerkiksi jos olen orkesterissa sijaisena, tulee soitettua enemmän. Kuopion viulukilpailua varten Mönkkönen oli erityisen tarkka siitä, että hän pystyi harjoittelemaan joka päivä laadukkaasti. Kun hän vietti joulua nykyään Nummelassa asuvien vanhempiensa luona, harjoittelupaikaksi löytyi Vihdin kirkko. –\\u2009Minulla oli toive, että pääsisin treenaamaan hyvään tilaan, ja rakastan harjoitella Vihdin kirkossa. Minulla oli kahvia termarissa ja sain vain oleskella siellä musiikin kanssa. Viulukilpailun välieriin valitut ilmoitetaan sunnuntaina illalla. Mönkkönen myöntää, että seuraavat pari päivää menevät epävarmuudessa. –\\u2009Toisaalta tällä alalla joutuu sietämään epävarmuutta muutenkin niin paljon, että koetan ottaa näistä päivistä ilon irti. Ohjelmiston lämmittelyn lisäksi koetan ulkoilla ja pelailla kollegojen kanssa vaikka lautapelejä, että tulee muutakin ajateltavaa. Muiden esityksiä Mönkkönen ei aio kuunnella. –\\u2009Haluan aidosti keskittyä omaan tekemiseeni. Mutta ei se katastrofi ole, jos vähän vahingossa kuulee muitakin. Joskus on ihanaa ja inspiroivaakin kuulla vaikka jonkun kaunis vibrato ja ajatella, että minäkin haluan soittaa noin. Silloin se palvelee kehittymistä. Jos ajattelee, että apua, toi soittaa paremmin kuin minä, niin siinä saa itsensä vain sekaisin. Mitä finaalipaikka merkitsisi Mönkköselle? –\\u2009Sitä on hirmuisen vaikea sanoa. Toki sellainen mielikuva on, että finaaliin pääsy olisi hyvä ponnistus ammattielämään, ja menestys painaisi myös esimerkiksi apurahahakemuksissa. Mutta jos ajattelen itseäni, niin eniten finaaliin pääsemisessä minua innostaisi se, että pääsisin soittamaan Kuopion kaupunginorkesterin kanssa Sibeliuksen viulukonserton. Kuopion viulukilpailun alkuerät käydään 3.–5.1. Välierät ovat 7.–8.1. ja finaalit 9.–10.1. Iikka Taavitsainen Kuopion viulukilpailun ensimmäinen alkuerä keräsi paikalle kymmenittäin kiinnostuneita kuulijoita. Kuopiolainen Sanna Hannonen kertoo tulleensa seuraamaan kilpailu nyt ensimmäistä kertaa. –\\u2009Viulumusiikki on mitä ihaninta musiikkia. Sitä kuunnellessa nauttii ja lepää. Itse en harrasta soittamista, mutta nautin siitä, kun joku soittaa hyvin viulua. Aikaisemmin Hannonen on käynyt kuuntelemassa Kuopiossa pianokilpailua. Ajatus lähteä viulukilpailuun syntyi yhdessä työkaverin kanssa. –\\u2009Ja tämä alkuerän aikataulu osui hyvin omaan aikatauluun. Tavoite on, että näkisin muitakin eriä. Helsinkiläinen Niko Nokelainen tuli paikalle, koska hänen tyttärensä Elisa Nokelainen soittaa kilpailussa. Isä ja tytär ovat nyt ensimmäistä kertaa Kuopiossa. –\\u2009Aikaisemmin olemme käyneet muun muassa Jyväskylän viulukilpailussa, Nokelainen kertoo. –\\u2009Minua jännittää kauheasti, mutta lapsi on aivan rentona, hän nauraa.\', \'lead\': \'\'}".n\n Vaihe 1: Analysoi annettu artikkeli ja siinä mainitut henkilöt. Ota huomioon sekä suomenkieliset että englanninkieliset nimikäytänteet.\n Vaihe 2: Listaa jokainen henkilö joka on mainittu artikkelissa koko nimellä, niin että hänestä on annettu etunimi ja sukunimi. Jos henkilölle ei ole annettu sukunimeä artikkelissa, älä listaa häntä. Listaa nämä kaikki, riippumatta siitä, onko henkilö elossa vai kuollut. Listaa henkilö myös jos vain hänen työnsä mainitaan, esimerkiksi \'Leonardo Da Vincin maalaus ...\'. Älä listaa henkilöä, jos hänen nimeään ei ole mainittu. Älä listaa eläimiä tai muita nimettyjä kohteita.\n Kirjoita jokainen nimi täsmälleen siinä muodossa kuin se esiintyy artikkelissa, kaikki pienaakkosilla. Älä tee oletuksia henkilön nimestä. Esimerkiksi, jos henkilöllä A ei ole mainittua sukunimeä, mutta hänen puolisollaan on, älä oleta, että henkilöllä A on sama sukunimi.\n Vaihe 3: Käy lista läpi ja varmista että kukin henkilö on mainittu vain kerran listassa. Jos sama henkilö on listassa useamman kerran käytä tästä henkilöstä hänen pidempää nimeä, esimerkiksi \'annamari kaisla korhonen\' mieluummin kuin \'mari korhonen\', ja poista kaikki muut maininnat tästä henkilöstä.\n Vaihe 4: Käy listä läpi vielä kerran ja poista jokaisen henkilön nimi, jolla ei ole sukunimeä mainittu artikkelissa. Jos henkilölle on mainittu vain etunimi, poista hänet listasta.\n Anna vain lista henkilöistä. Anna lista JSON lista muodossa.'}], 'model': 'ark-gpt-4o', 'seed': 1, 'store': True, 'temperature': 0}}
DEBUG    openai._base_client:_base_client.py:993 Sending HTTP Request: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.started host='swedencentral.api.cognitive.microsoft.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG    httpcore.connection:_trace.py:47 connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fd24efc70e0>
DEBUG    httpcore.connection:_trace.py:47 start_tls.started ssl_context=<ssl.SSLContext object at 0x7fd24ef559a0> server_hostname='swedencentral.api.cognitive.microsoft.com' timeout=5.0
DEBUG    httpcore.connection:_trace.py:47 start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fd24eddc690>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_headers.complete
DEBUG    httpcore.http11:_trace.py:47 send_request_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 send_request_body.complete
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Length', b'1251'), (b'Content-Type', b'application/json'), (b'apim-request-id', b'28e3c68e-41c7-4dbd-9770-3958cd477660'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'x-content-type-options', b'nosniff'), (b'x-accel-buffering', b'no'), (b'x-ms-rai-invoked', b'true'), (b'x-request-id', b'f6f61c55-619e-4396-a078-4a5af3a35ebe'), (b'x-ms-region', b'Sweden Central'), (b'x-ratelimit-remaining-requests', b'149'), (b'x-ratelimit-limit-requests', b'150'), (b'x-ratelimit-remaining-tokens', b'147098'), (b'x-ratelimit-limit-tokens', b'150000'), (b'azureml-model-session', b'd453-20250219010046'), (b'x-envoy-upstream-service-time', b'1509'), (b'x-ms-client-request-id', b'28e3c68e-41c7-4dbd-9770-3958cd477660'), (b'Date', b'Wed, 05 Mar 2025 15:06:38 GMT')])
INFO     httpx:_client.py:1025 HTTP Request: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.started request=<Request [b'POST']>
DEBUG    httpcore.http11:_trace.py:47 receive_response_body.complete
DEBUG    httpcore.http11:_trace.py:47 response_closed.started
DEBUG    httpcore.http11:_trace.py:47 response_closed.complete
DEBUG    openai._base_client:_base_client.py:1032 HTTP Response: POST https://swedencentral.api.cognitive.microsoft.com/openai/deployments/ark-gpt-4o/chat/completions?api-version=2024-02-15-preview "200 OK" Headers({'content-length': '1251', 'content-type': 'application/json', 'apim-request-id': '28e3c68e-41c7-4dbd-9770-3958cd477660', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'x-accel-buffering': 'no', 'x-ms-rai-invoked': 'true', 'x-request-id': 'f6f61c55-619e-4396-a078-4a5af3a35ebe', 'x-ms-region': 'Sweden Central', 'x-ratelimit-remaining-requests': '149', 'x-ratelimit-limit-requests': '150', 'x-ratelimit-remaining-tokens': '147098', 'x-ratelimit-limit-tokens': '150000', 'azureml-model-session': 'd453-20250219010046', 'x-envoy-upstream-service-time': '1509', 'x-ms-client-request-id': '28e3c68e-41c7-4dbd-9770-3958cd477660', 'date': 'Wed, 05 Mar 2025 15:06:38 GMT'})
DEBUG    openai._base_client:_base_client.py:1040 request_id: f6f61c55-619e-4396-a078-4a5af3a35ebe
=============================== warnings summary ===============================
../../.cache/pypoetry/virtualenvs/analytics-dIuC8OJs-py3.13/lib/python3.13/site-packages/_pytest/config/__init__.py:1500
  /home/hgavert/.cache/pypoetry/virtualenvs/analytics-dIuC8OJs-py3.13/lib/python3.13/site-packages/_pytest/config/__init__.py:1500: PytestConfigWarning: No files were found in testpaths; consider removing or adjusting your testpaths configuration. Searching recursively from the current directory instead.
    self.args, self.args_source = self._decide_args(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_analysis.py::test_get_mentioned_people - AssertionError: assert (8 / 11) >= 0.9
 +  where 11 = len(['elisa nokelainen', 'elvi hautam\xe4ki', 'iikka taavitsainen', 'j.s. bach', 'jasmin m\xf6nkk\xf6nen', 'ludwig van beethoven', 'niccolo paganini', 'niko nokelainen', 'pertti sutinen', 'petteri iivonen', 'sanna hannonen'])
============= 1 failed, 2 passed, 5 deselected, 1 warning in 4.45s =============
